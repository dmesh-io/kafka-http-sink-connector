/*
 * This file was generated by the Gradle 'init' task.
 */

buildscript {
    repositories {
        maven {
            url "https://plugins.gradle.org/m2/"
        }
    }
    dependencies {
        classpath "gradle.plugin.com.github.jengelman.gradle.plugins:shadow:7.0.0"
    }
}
plugins {
    id 'java'
    id 'maven-publish'
    id "com.github.johnrengelman.shadow" version "7.0.0"
}

repositories {
    mavenLocal()
    maven {
        url = uri('https://repo.maven.apache.org/maven2/')
    }
}
dependencies {
    implementation 'com.google.code.gson:gson:2.8.5'
    implementation 'javax.xml.bind:jaxb-api:2.3.1'
    implementation 'org.apache.kafka:connect-api:2.8.0'
    testImplementation 'org.junit.jupiter:junit-jupiter:5.4.2'
    testImplementation 'org.mockito:mockito-core:2.23.4'
    compileOnly 'org.apache.kafka:connect-api:2.8.0'
}

group = 'nz.ac.auckland'
version = '1.0.1'
description = 'uoa-kafka-http-sink-connector'
java.sourceCompatibility = JavaVersion.VERSION_11

publishing {
    publications {
        myPublication(MavenPublication) {
            groupId 'soliver-kafka'
            artifactId 'kafka-connect-sap'
            version "$version"
            artifact "build/libs/kafka-connect-http-sink-$version-all.jar"
        }
    }

    // Repositories *to* which Gradle can publish artifacts
    repositories {
        maven {
            url 'https://pkgs.dev.azure.com/dev-fg/Kafka/_packaging/kafka-connect-odata/maven/v1'
            credentials {
                username "kafka-connect-http-sink"
                //The Azure DevOps Services build system will use the "SYSTEM_ACCESSTOKEN" to authenticate to Azure DevOps Services feeds
                password "$System.env.AZURE_ARTIFACTS_ENV_ACCESS_TOKEN"
            }
        }
    }
}

build.dependsOn shadowJar
